(function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,i=1;i<s.length;i++){var u=s[i];0!==o[u]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var n={},o={app:0},r=[];function a(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=n,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/chatroom-frontend/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0732":function(e,t,s){},4135:function(e,t,s){"use strict";s("d4d0")},"56d7":function(e,t,s){"use strict";s.r(t);var n=s("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},r=[],a={name:"App"},i=a,u=(s("e115"),s("2877")),c=Object(u["a"])(i,o,r,!1,null,null,null),l=c.exports,p=s("8c4f"),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("h1",[e._v("登入")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",[t("label",{attrs:{for:"account"}},[e._v("帳號：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{type:"text",id:"account",required:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),t("div",[t("label",{attrs:{for:"password"}},[e._v("密碼：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("button",{attrs:{type:"submit"}},[e._v("登入")])]),t("button",{on:{click:e.goToRegister}},[e._v("前往註冊")])])},m=[],v={name:"Login",data(){return{account:"",password:""}},methods:{login(){const e="admin";localStorage.setItem("username",e),this.$router.push("/chatroom")},goToRegister(){this.$router.push("/register")}}},g=v,f=(s("bda6"),Object(u["a"])(g,d,m,!1,null,"768586ca",null)),h=f.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register"},[t("h1",[e._v("註冊")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[t("div",[t("label",{attrs:{for:"account"}},[e._v("帳號：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{type:"text",id:"account",required:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),t("div",[t("label",{attrs:{for:"password"}},[e._v("密碼：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("div",[t("label",{attrs:{for:"username"}},[e._v("名稱：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",id:"username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),t("button",{attrs:{type:"submit"}},[e._v("註冊")])]),t("button",{on:{click:e.goToLogin}},[e._v("前往登入")])])},b=[],y={name:"Register",data(){return{account:"",password:"",username:""}},methods:{register(){console.log("註冊中...",this.account,this.password,this.username)},goToLogin(){this.$router.push("/login")}}},_=y,x=(s("8507"),Object(u["a"])(_,w,b,!1,null,"70a86a09",null)),k=x.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"chatroom"},[t("div",{staticClass:"header"},[t("h1",[e._v("聊天室")]),t("button",{staticClass:"logout-button",on:{click:e.logout}},[e._v("登出")])]),t("div",{staticClass:"messages"},e._l(e.messages,(function(s,n){return t("div",{key:n,class:["message",s.username===e.currentUser?"self":"other"]},[t("div",{staticClass:"message-content"},[t("span",{staticClass:"username"},[e._v(e._s(s.username))]),e._v("： "),t("span",{staticClass:"text"},[e._v(e._s(s.text))])])])})),0),t("div",{staticClass:"input-area"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",placeholder:"輸入訊息..."},domProps:{value:e.newMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),t("button",{on:{click:e.sendMessage}},[e._v("送出")])])])},S=[],M={name:"Chatroom",data(){return{currentUser:localStorage.getItem("username")||"admin",newMessage:"",messages:[],ws:null}},created(){this.connectWebSocket()},beforeDestroy(){this.ws&&this.ws.close()},methods:{connectWebSocket(){this.ws=new WebSocket("ws://localhost:8080"),this.ws.onopen=()=>{console.log("WebSocket connection established")},this.ws.onmessage=e=>{const t=JSON.parse(e.data);this.messages.push(t),this.$nextTick(()=>{const e=this.$el.querySelector(".messages");e.scrollTop=e.scrollHeight})},this.ws.onclose=()=>{console.log("WebSocket connection closed")},this.ws.onerror=e=>{console.error("WebSocket error:",e)}},sendMessage(){if(""!==this.newMessage.trim()){const e={username:this.currentUser,text:this.newMessage.trim()};this.ws.send(JSON.stringify(e)),this.messages.push(e),this.newMessage="",this.$nextTick(()=>{const e=this.$el.querySelector(".messages");e.scrollTop=e.scrollHeight})}},logout(){localStorage.removeItem("username"),this.$router.push("/login")}}},j=M,P=(s("4135"),Object(u["a"])(j,O,S,!1,null,"cd250cae",null)),C=P.exports;n["a"].use(p["a"]);const T=[{path:"/",redirect:"/login"},{path:"/login",component:h},{path:"/register",component:k},{path:"/chatroom",component:C}],$=new p["a"]({mode:"history",routes:T});var N=$;s("a347");n["a"].config.productionTip=!1,new n["a"]({router:N,render:e=>e(l)}).$mount("#app")},"730e":function(e,t,s){},8507:function(e,t,s){"use strict";s("730e")},a347:function(e,t,s){},a7b2:function(e,t,s){},bda6:function(e,t,s){"use strict";s("a7b2")},d4d0:function(e,t,s){},e115:function(e,t,s){"use strict";s("0732")}});
//# sourceMappingURL=app.c75bee95.js.map